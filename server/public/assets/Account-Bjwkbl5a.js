import{u as A,r as s,g as u,j as e}from"./index-DFEJPJpx.js";const b=()=>{const r=A(),[n,o]=s.useState({AadharNo:"",panNo:"",AadharCardImage:null,panCardImage:null}),[i,l]=s.useState(!1),[m,p]=s.useState(null);s.useEffect(()=>{u("token")||r("/login")},[r]);const c=a=>{const{name:t,value:d}=a.target;o(h=>({...h,[t]:t==="AadharCardImage"||t==="panCardImage"?a.target.files[0]:d}))},g=async a=>{a.preventDefault(),l(!0),p(null);try{const t=u("token"),d=new FormData;Object.entries(n).forEach(([f,C])=>{d.append(f,C)});const h=await fetch("https://chagans.com/user/kycDocument",{method:"POST",headers:{authorization:`Bearer ${t}`},body:d});if(!h.ok)throw new Error("Failed to submit KYC data");const j=await h.json();console.log("KYC submission successful:",j)}catch(t){p(t.message)}finally{l(!1)}},x=a=>/^\d*$/.test(a)&&a.length<=12,N=a=>/^[A-Z]{0,5}[0-9]{0,4}[A-Z]{0,1}$/.test(a)&&a.length<=10;return e.jsx("section",{className:"kyc",children:e.jsxs("form",{className:"kyc_form",onSubmit:g,children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{className:"subTitle",children:"KYC"}),e.jsx("p",{className:"description",children:"We are going to verify your identity. This process will take 24 hours."})]}),e.jsxs("div",{className:"inputField",children:[e.jsx("label",{htmlFor:"AadharNo",children:"Aadhar No"}),e.jsx("input",{type:"text",name:"AadharNo",placeholder:"Aadhar Number",id:"AadharNo",maxLength:12,required:!0,value:n.AadharNo,onChange:a=>x(a.target.value)&&c(a)})]}),e.jsxs("div",{className:"inputField",children:[e.jsx("label",{htmlFor:"AadharCard",children:"Aadhar Card Photo"}),e.jsx("input",{type:"file",name:"AadharCardImage",id:"AadharCard",accept:"image/*",required:!0,onChange:c})]}),e.jsxs("div",{className:"inputField",children:[e.jsx("label",{htmlFor:"panNo",children:"PAN No"}),e.jsx("input",{type:"text",name:"panNo",placeholder:"PAN Number",id:"panNo",required:!0,maxLength:10,value:n.panNo,onChange:a=>N(a.target.value)&&c(a)})]}),e.jsxs("div",{className:"inputField",children:[e.jsx("label",{htmlFor:"panCard",children:"PAN Card Photo"}),e.jsx("input",{type:"file",name:"panCardImage",id:"panCard",accept:"image/*",required:!0,onChange:c})]}),m&&e.jsx("p",{className:"error",children:m}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,children:i?"Submitting...":"Submit"})})]})})},v=()=>{const[r,n]=s.useState({}),o=u("token"),[i,l]=s.useState(!1);return s.useEffect(()=>{o&&n(o)},[]),e.jsx("section",{className:"account",children:e.jsx("div",{className:"accountWrapper",children:i===!1?e.jsx(b,{}):e.jsx(AccountDetails,{admin:r,setIsKycCompleted:l})})})};export{v as default};
